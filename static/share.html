<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åˆ†äº«çš„å¯¹è¯ - AI Hub</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.0/marked.min.js"></script>
<style>
:root{--bg:#0f0f1a;--bg2:#1a1a2e;--text:#e8e8f0;--text2:#8888a0;--accent:#6366f1;--border:#2d2d4a}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:20px}
.container{max-width:800px;margin:0 auto}
.header{text-align:center;padding:40px 0;border-bottom:1px solid var(--border);margin-bottom:30px}
.header h1{font-size:24px;margin-bottom:8px}
.header p{color:var(--text2);font-size:14px}
.meta{display:flex;justify-content:center;gap:20px;margin-top:16px;font-size:13px;color:var(--text2)}
.message{margin-bottom:20px}
.message-header{font-size:13px;color:var(--text2);margin-bottom:8px}
.message-content{padding:16px 20px;border-radius:12px;line-height:1.7;font-size:15px}
.message.user .message-content{background:var(--accent);margin-left:40px}
.message.assistant .message-content{background:var(--bg2);margin-right:40px}
.message-content pre{margin:12px 0;padding:14px;background:var(--bg);border-radius:8px;overflow-x:auto}
.message-content code{font-family:Consolas,monospace;font-size:13px}
.footer{text-align:center;padding:40px 0;color:var(--text2);font-size:13px}
.footer a{color:var(--accent);text-decoration:none}
.error{text-align:center;padding:60px;color:var(--text2)}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1 id="title">åŠ è½½ä¸­...</h1>
<p id="subtitle"></p>
<div class="meta">
<span id="viewCount"></span>
<span id="createTime"></span>
</div>
</div>
<div id="messages"></div>
<div class="footer">
ç”± <a href="/">AI Hub</a> ç”Ÿæˆçš„å¯¹è¯åˆ†äº«
</div>
</div>
<script>
marked.setOptions({breaks:true,highlight:function(code,lang){return lang&&hljs.getLanguage(lang)?hljs.highlight(code,{language:lang}).value:code}});
var shareId=window.location.pathname.split('/').pop();
fetch('/api/share/'+shareId).then(function(r){return r.json()}).then(function(data){
if(data.detail){document.getElementById('messages').innerHTML='<div class="error">'+data.detail+'</div>';return}
document.getElementById('title').textContent=data.conversation.title||'å¯¹è¯åˆ†äº«';
document.getElementById('subtitle').textContent=(data.conversation.provider||'')+' / '+(data.conversation.model||'');
document.getElementById('viewCount').textContent='ğŸ‘ '+data.view_count+' æ¬¡æŸ¥çœ‹';
document.getElementById('createTime').textContent='ğŸ“… '+(data.conversation.created_at||'').slice(0,10);
var html=data.messages.map(function(m){
var content=m.content;
try{if(typeof content==='string'&&content.startsWith('['))content=JSON.parse(content)}catch(e){}
if(Array.isArray(content))content='[å›¾ç‰‡æ¶ˆæ¯]';
return'<div class="message '+(m.role==='user'?'user':'assistant')+'"><div class="message-header">'+(m.role==='user'?'ğŸ‘¤ ç”¨æˆ·':'ğŸ¤– åŠ©æ‰‹')+'</div><div class="message-content">'+marked.parse(content)+'</div></div>'
}).join('');
document.getElementById('messages').innerHTML=html;
document.querySelectorAll('pre code').forEach(function(el){hljs.highlightElement(el)});
}).catch(function(e){document.getElementById('messages').innerHTML='<div class="error">åŠ è½½å¤±è´¥: '+e.message+'</div>'});
</script>
</body>
</html>